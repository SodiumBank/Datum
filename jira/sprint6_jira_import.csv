Issue Type,Summary,Description,Priority,Component,Epic Name
Epic,Sprint 6 – Close Sprint 5 Gaps + Multi-Industry Layer Expansion,"Make Sprint 5 claims true (profiles router reachable + PDF story resolved) and expand standards layering to aerospace/medical/automotive deltas while preserving determinism and auditability.",Highest,Program,EPIC-6
Story,Mount Profiles Router in API,"Wire `services/api/routers/profiles.py` into `services/api/main.py` with prefix `/profiles` and tags. Ensure router import path is consistent with the existing router import pattern. Update docs (API_ENDPOINTS.md) to reflect available endpoints.",Highest,API,EPIC-6
Sub-task,Add router import and include_router for profiles,"Update `services/api/main.py` to import `profiles` and add `app.include_router(profiles.router, prefix='/profiles', tags=['profiles'])`.",Highest,API,EPIC-6
Sub-task,Update API docs for /profiles endpoints,"Update `API_ENDPOINTS.md` (and/or README) to list lifecycle/versioning/bundles endpoints under `/profiles`.",High,Docs,EPIC-6
Story,Resolve Compliance Report PDF Contract,"Either implement PDF output or explicitly remove/disable `pdf` as a supported format. Behavior must be consistent: no 500s for normal client usage.",Highest,Reports / Compliance,EPIC-6
Sub-task,Option A: Implement PDF rendering,"Use `reportlab` to render a basic auditor-grade PDF that mirrors the HTML sections (title, metadata, coverage table, deviations, approvals). Return base64 or store artifact and return reference.",High,Reports / Compliance,EPIC-6
Sub-task,Option B: Disable PDF until implemented,"If PDF is deferred: reject `format=pdf` with a clear 400 + message. Update docs to state HTML-only.",High,Reports / Compliance,EPIC-6
Story,Make Bundle/Profile Resolution Deterministic,"Remove `set()` ordering instability when merging `active_profiles` + bundle profiles. Keep deterministic ordering (by semantic layer then profile_id) before resolving stack.",High,Core / Compliance,EPIC-6
Sub-task,Define deterministic merge rule,"Sort merged profiles deterministically (e.g., BASE→DOMAIN→CUSTOMER_OVERRIDE then profile_id; if type unknown, last).",High,Core / Compliance,EPIC-6
Sub-task,Add regression test for profile merge determinism,"Add a test that repeated runs with same bundle+profiles yield identical `active_profiles` ordering and identical `profile_stack` metadata.",Medium,Tests,EPIC-6
Story,Profile Lifecycle Enforcement in Write Paths,"Ensure approved profiles are immutable where it matters: block modifications through any profile save/update pathways (not just via lifecycle helpers). If a mutation path exists, force creation of new version.",High,Core / Compliance,EPIC-6
Sub-task,Audit profile write entry points,"Search for any code that writes to `standards_profiles/*.json` and ensure approved profiles cannot be overwritten.",High,Core / Compliance,EPIC-6
Sub-task,Add unit tests for immutability enforcement,"Create fixtures for draft/submitted/approved and verify write operations fail for approved.",Medium,Tests,EPIC-6
Story,Multi-Industry Standards Layer Model (Aero/Medical/Automotive)","Add profile/pack scaffolding to support additional regulated industries with minimal deltas from BASE. Goal: same core engine, different packs via profile stack.",Highest,Core / Compliance,EPIC-6
Sub-task,Define domain profiles for aerospace/medical/automotive,"Create DOMAIN profiles that layer industry-specific packs (e.g., AS9100, ISO13485, IATF16949) while reusing BASE + NASA polymerics as applicable.",High,Core / Compliance,EPIC-6
Sub-task,Add industry_profiles entries + default packs,"Update `industry_profiles/*.json` for aerospace/medical/automotive defaults and validate against schema.",High,Schemas,EPIC-6
Sub-task,Add starter standards packs + placeholder rules,"Create minimal standards packs per industry with a few representative rules + citations so SOE runs demonstrate differences.",High,SOE,EPIC-6
Story,Audit Artifact Consistency Checks,"Add a single "audit integrity" helper that verifies: approved plan, export hash present, report hash present, profile states valid, and profile stack recorded. Expose as internal function + optional endpoint.",Medium,Core / Compliance,EPIC-6
Sub-task,Implement audit integrity checker,"Return a structured checklist with PASS/FAIL + reasons.",Medium,Core / Compliance,EPIC-6
Sub-task,Add docs + example output,"Add an example JSON in `/examples` and document intended auditor usage.",Low,Docs,EPIC-6
